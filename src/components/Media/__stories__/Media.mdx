import {Meta} from '@storybook/blocks';

import {StoryTemplate} from '../../../demo/StoryTemplate.mdx';
import * as MediaStories from './Media.stories.tsx';

<Meta of={MediaStories} />
<StoryTemplate>

## Usage

For a detailed usage guide of the Media component, see [Media Usage](https://github.com/gravity-ui/page-constructor/blob/main/memory-bank/usage/media.md).

## Parameters

The Media component supports various media types including images, videos, YouTube embeds, DataLens, and iframes.

### Image-specific Parameters

`image?: ImageProps | ImageProps[] | ImageDeviceProps` — Image data, can be:
- `string` — Simple image URL
- `ImageObjectProps` — Object with src, alt, and other properties
- `ImageDeviceProps` — Device-specific images (desktop, mobile, tablet)
- `ImageProps[]` — Array of images for slider functionality

#### ImageObjectProps
- `src: string` — Image source URL
- `alt?: string` — Alternative text for accessibility
- `disableCompress?: boolean` — Disable image compression (default: false)
- `hide?: boolean | Partial<Record<'desktop' | 'mobile' | 'tablet', boolean>>` — Hide on specific devices
- `fetchPriority?: 'high' | 'low' | 'auto'` — Fetch priority hint
- `loading?: 'eager' | 'lazy'` — Loading behavior
- `aria-describedby?: string` — ARIA describedby attribute

#### ImageDeviceProps
- `desktop: string` — Desktop image URL
- `mobile: string` — Mobile image URL
- `tablet?: string` — Tablet image URL (optional)
- `alt?: string` — Alternative text for accessibility
- `disableCompress?: boolean` — Disable image compression (default: false)
- `hide?: boolean | Partial<Record<'desktop' | 'mobile' | 'tablet', boolean>>` — Hide on specific devices
- `fetchPriority?: 'high' | 'low' | 'auto'` — Fetch priority hint
- `loading?: 'eager' | 'lazy'` — Loading behavior
- `aria-describedby?: string` — ARIA describedby attribute

`parallax?: boolean` — Enables parallax scrolling effect for images

`fullscreen?: boolean` — Enables fullscreen functionality for images

`imageClassName?: string` — Optional CSS class name for image elements

`isBackground?: boolean` — Renders image as background

`disableImageSliderForArrayInput?: boolean` — Disables slider for image arrays

`onImageLoad?: () => void` — Callback when image loads

### Video Parameters

`video?: MediaVideoProps` — Video configuration object with the following properties:

#### MediaVideoProps
- `src: string[]` — Array of video source URLs in different formats
- `type?: 'default' | 'player'` — Video player type (default: 'default')
- `loop?: boolean | LoopProps` — Video looping behavior
  - `boolean` — Simple loop on/off
  - `LoopProps` — Advanced loop with start/end times: `{start: number, end?: number}`
- `muted?: boolean` — Whether video is muted by default
- `autoplay?: boolean` — Whether video autoplays (default: true)
- `elapsedTime?: number` — Starting elapsed time in seconds
- `playButton?: PlayButtonProps` — Custom play button configuration
- `controls?: 'default' | 'custom'` — Video controls type
- `customControlsOptions?: CustomControlsOptions` — Custom controls configuration
- `ariaLabel?: string` — ARIA label for accessibility
- `contain?: boolean` — Whether video should be contained within bounds
- `onVideoEnd?: () => void` — Callback when video ends

#### PlayButtonProps
- `type?: 'default' | 'text'` — Play button type
- `theme?: 'blue' | 'grey'` — Play button theme
- `text?: string` — Custom text for text-type button
- `className?: string` — CSS class for styling

#### CustomControlsOptions
- `type?: 'with-mute-button' | 'with-play-pause-button'` — Custom controls type
- `muteButtonShown?: boolean` — Whether to show mute button
- `positioning?: 'left' | 'right' | 'center'` — Button positioning

`videoClassName?: string` — Optional CSS class name for video elements

`previewImg?: string` — Preview image for videos

`playVideo?: boolean` — Controls video autoplay (default: true)

`playButton?: PlayButtonProps` — Custom play button configuration

`customBarControlsClassName?: string` — CSS class for custom video controls

`ratio?: number | 'auto'` — Aspect ratio for videos

### Other Media Parameters

`youtube?: string` — YouTube video ID

`videoIframe?: string` — Video iframe URL

`dataLens?: DataLensProps` — DataLens configuration

`iframe?: IframeProps` — Iframe configuration

### Common Parameters

`height?: number` — Fixed height for media elements

`color?: string` — Background color

`analyticsEvents?: AnalyticsEvents` — Analytics tracking configuration

`qa?: string` — QA attribute for testing

</StoryTemplate>
